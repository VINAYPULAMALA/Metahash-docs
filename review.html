<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UID111 Review - MetaHash</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="dark-theme">
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <img src="icon/favicon.png" alt="MetaHash Logo" class="loading-logo">
        </div>
    </div>

    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="icon/favicon.png" alt="MetaHash Logo" class="logo-img">
            </div>
            <nav class="header-nav">
                <a href="review.html" class="nav-link nav-link--accent" aria-current="page">
                    <span>UID111 Review</span>
                </a>
                <a href="https://metahash73.com/treasury" class="nav-link" target="_blank" rel="noopener noreferrer">
                    <span>Treasury</span>
                </a>
                <a href="https://metahash73.com/auction/current" class="nav-link" target="_blank" rel="noopener noreferrer">
                    <span>Auction</span>
                </a>
                <a href="https://x.com/metahashsn73" target="_blank" rel="noopener noreferrer" class="nav-link" aria-label="MetaHash on X / Twitter">
                    <span class="nav-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" role="img">
                            <path d="M21.543 2.478a1 1 0 0 0-1.392-.105L13.27 8.24l-4.51-5.6A1 1 0 0 0 7.5 2h-3a1 1 0 0 0-.78 1.625l6.121 7.374-6.3 5.38A1 1 0 0 0 4.5 18h3a1 1 0 0 0 .773-.367l4.825-5.59 4.925 6.115A1 1 0 0 0 19.5 18h3a1 1 0 0 0 .768-1.64l-6.217-7.24 4.487-3.867a1 1 0 0 0 .005-1.775z"/>
                        </svg>
                    </span>
                    <span>Twitter</span>
                </a>
                <a href="https://github.com/fx-integral/metahash" target="_blank" class="nav-link">
                    <span class="nav-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" role="img">
                            <path d="M12 2a10 10 0 0 0-3.162 19.492c.5.092.688-.216.688-.483 0-.237-.009-.866-.013-1.7-2.8.609-3.39-1.35-3.39-1.35-.455-1.156-1.11-1.464-1.11-1.464-.907-.62.069-.608.069-.608 1.003.07 1.53 1.033 1.53 1.033.892 1.528 2.341 1.087 2.91.832.091-.646.35-1.087.636-1.338-2.237-.255-4.588-1.118-4.588-4.977 0-1.1.39-1.997 1.029-2.701-.103-.254-.446-1.276.098-2.659 0 0 .84-.269 2.75 1.03A9.57 9.57 0 0 1 12 6.844c.85.004 1.705.115 2.504.337 1.908-1.299 2.748-1.03 2.748-1.03.546 1.383.203 2.405.1 2.66.64.704 1.028 1.6 1.028 2.7 0 3.87-2.355 4.718-4.6 4.968.36.309.68.92.68 1.855 0 1.338-.012 2.419-.012 2.747 0 .269.187.58.693.481A10 10 0 0 0 12 2z"/>
                        </svg>
                    </span>
                    <span>GitHub</span>
                </a>
                <a href="https://discord.com/channels/799672011265015819/1351969903132938302" target="_blank" class="nav-link">
                    <span class="nav-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" role="img">
                            <path d="M20.317 4.369A19.791 19.791 0 0 0 16.532 3a13.281 13.281 0 0 0-.651 1.338 18.626 18.626 0 0 0-7.762 0A12.932 12.932 0 0 0 7.46 3a19.736 19.736 0 0 0-3.79 1.38C1.014 8.332.34 12.17.507 15.962a19.836 19.836 0 0 0 4.968 2.541 14.65 14.65 0 0 0 1.067-1.73 12.808 12.808 0 0 1-1.687-.807c.143-.1.284-.205.42-.316a13.21 13.21 0 0 0 11.447 0c.138.11.279.214.42.316-.537.311-1.102.586-1.69.81.306.613.657 1.194 1.05 1.736A19.812 19.812 0 0 0 23.5 15.96c.2-4.276-.73-8.077-3.183-11.591zM8.676 14.455c-1.118 0-2.033-1.023-2.033-2.278s.893-2.278 2.033-2.278 2.058 1.036 2.033 2.278c0 1.255-.894 2.278-2.033 2.278zm6.639 0c-1.118 0-2.033-1.023-2.033-2.278s.893-2.278 2.033-2.278 2.058 1.036 2.033 2.278c0 1.255-.894 2.278-2.033 2.278z"/>
                        </svg>
                    </span>
                    <span>MetaHash Discord</span>
                </a>
            </nav>
        </div>
    </header>

    <main class="review-main">
        <div class="review-wrapper">
            <div class="review-banner">
                ❓ Developers: why does UID111 not make a single bid even after running for a couple of days?
            </div>

            <section class="review-section">
                <h2>Snapshot</h2>
                <ul class="review-list">
                    <li>Ubuntu 22.04 on AWS t3.medium; setup finished in roughly forty minutes using the documented python3 + venv + <code>uv</code> flow.</li>
                    <li>Wallet and hotkey created with <code>btcli wallet new_coldkey</code> / <code>new_hotkey</code>, then registered to subnet 73 and confirmed as UID 111.</li>
                    <li>Miner runs with α sourced from subnet 62, bidding <code>0.25</code> α at <code>500</code> bps, and keeps up through restarts with <code>screen</code> or systemd.</li>
                    <li>Key blockers were dependency pinning (<code>async-substrate-interface==1.3.1</code>), missing <code>.env</code>, and misaligned <code>--payment.validators</code>.</li>
                </ul>
            </section>

            <section class="review-section">
                <h2>What I Ran</h2>
                <pre class="review-code"><code>sudo apt update && sudo apt upgrade -y
sudo apt install -y python3 python3-venv python3-pip git
python3 -m venv .venv
source .venv/bin/activate
pip install -U pip wheel uv
uv pip install -e .
pip install -U bittensor-cli

btcli wallet new_coldkey --wallet.name mywallet
btcli wallet new_hotkey --wallet.name mywallet --wallet.hotkey miner1
btcli subnets register --netuid 73 --wallet.name mywallet --wallet.hotkey miner1
btcli stake add --netuid 62 --wallet.name mywallet --wallet.hotkey miner1 --amount 0.15

python neurons/miner.py \
  --netuid 73 \
  --wallet.name mywallet \
  --wallet.hotkey miner1 \
  --subtensor.network finney \
  --miner.bids.netuids 62 \
  --miner.bids.amounts 0.25 \
  --miner.bids.discounts 500 \
  --axon.port 8091 \
  --axon.external_port 8091 \
  --logging.debug \
  --blacklist.force_validator_permit \
  --payment.validators 5H9WDbXXtJVoMRAGM3EgqZPZBk5A4d57PthhxsNrb6hBXsz7</code></pre>
            </section>

            <section class="review-section">
                <h2>Run Experience</h2>
                <ul class="review-list">
                    <li><code>.env</code> lives in the repo root (<code>WALLET_NAME</code>, <code>WALLET_HOTKEY</code>, <code>WALLET_PASSWORD</code>, <code>BITTENSOR_NETWORK</code>). Missing the password line had the miner looping for input until I fixed it.</li>
                    <li>First good launch shows <code>Axon served</code>, <code>Miner started</code>, <code>Configured Bid Lines</code>, followed by regular <code>Miner running...</code>. Seeing <code>AuctionStart</code>, <code>Win invoice received</code>, and <code>α payment sent</code> confirmed the validator path.</li>
                    <li>Opening TCP 8091 in the AWS security group plus verifying with <code>ss -tulpn | grep 8091</code> was the gate to being seen on the network.</li>
                    <li><code>screen -S miner</code> was fine for early testing; I later switched to the provided systemd unit so restarts happen automatically (<code>journalctl -u metahash-miner -f</code> to watch it).</li>
                </ul>
            </section>

            <section class="review-section">
                <h2>Gotchas I Hit</h2>
                <ul class="review-list">
                    <li>Needed to call <code>python3</code> explicitly in a few spots; using <code>python</code> without the alias broke the flow.</li>
                    <li>Without the <code>async-substrate-interface==1.3.1</code> pin, imports failed—pinning solved it.</li>
                    <li>Misconfigured <code>--payment.validators</code> to an unstaked hotkey and watched α burn; <code>btcli stake overview</code> helped align the correct address.</li>
                    <li>When <code>AuctionStart</code> never appeared, port 8091 was closed; once I opened it, bids flowed.</li>
                    <li>On a t3.micro dry run the miner hit OOM and died. Upgrading to t3.medium and adding a 2G swapfile resolved it.</li>
                    <li><code>btcli subnets alpha_to_tao</code> replaced the old <code>swap</code> command; adjusting to the new syntax avoided CLI errors.</li>
                    <li>Block drift presented as “Extrinsic not included.” Running <code>python neurons/miner.py --fresh</code> pulled the miner back in sync.</li>
                </ul>
            </section>

            <section class="review-section guide-section">
                <h2>Full Setup & Troubleshooting Guide</h2>
                <p class="review-paragraph">Complete contents of <code>gpt.md</code> for reference.</p>
                <iframe src="gpt.md" class="guide-embed" title="MetaHash Miner Guide"></iframe>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2024 MetaHash. All rights reserved.</p>
            <div class="footer-links">
                <a href="https://x.com/metahashsn73" target="_blank">Twitter</a>
                <a href="https://github.com/fx-integral/metahash" target="_blank">GitHub</a>
                <a href="https://discord.com/channels/799672011265015819/1351969903132938302" target="_blank">Discord</a>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
</body>
</html>
