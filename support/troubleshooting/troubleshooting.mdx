---
title: Troubleshooting
description: Common issues and solutions for MetaHash miners
---

# Troubleshooting Guide

Use this playbook to diagnose MetaHash miner issues quickly. Jump straight to the section that matches your symptoms:

- [No validator traffic](#no-auctionstart-events): fix closed ports and axon reachability.
- [Bids never settle](#bids-never-clear): validate payment hotkeys and alpha balances.
- [Alpha invoice rejected](#invalid-alpha-invoice): correct subnet payments and clock drift.
- [Out-of-memory kills](#miner-killed-oom): add swap space and watch system load.
- [Command errors](#alpha-conversion-commands): update btcli syntax and environment values.
- [Wallet prompts](#wallet-password-loop): ensure `.env` is loaded and secrets are backed up.

<Tip>
Need a deeper search? Press `Ctrl + K` (or `⌘ + K` on macOS) in the top navigation to search the full documentation set.
</Tip>

## Validator Connection & Auction Flow

<div id="no-auctionstart-events"></div>

### No AuctionStart Events

<Accordion title="Symptom">
Logs never show `AuctionStart detected`, `WinSynapse`, or validator connections.
</Accordion>

**Root cause**: Validators cannot reach your axon because TCP port `8091` is closed or mapped incorrectly.

<Steps>
  <Step title="Open Port 8091">
    Ensure your cloud firewall or security group allows inbound TCP `8091` from validators (0.0.0.0/0 works during testing).
  </Step>
  <Step title="Verify Local Listener">
    ```bash
    ss -tulpn | grep 8091
    ```
    Expect to see Python listening on `[::]:8091`. If nothing appears, restart the miner.
  </Step>
  <Step title="Check External Reachability">
    ```bash
    nc -zv YOUR_INSTANCE_IP 8091
    ```
    You should receive `Connection succeeded`. If it fails, confirm any AWS/Azure/GCP firewall rules.
  </Step>
</Steps>

<div id="bids-never-clear"></div>

### Bids Never Clear

<Warning>
`--payment.validators` must include at least one hotkey with staked TAO; otherwise α payments are rejected and your bids loop forever.
</Warning>

1. Review stake:
   ```bash
   btcli stake overview
   ```
2. Use only hotkeys with stake in your `--payment.validators` flag.
3. If you operate the validator yourself, double-check that the hotkey is funded and online.

<div id="invalid-alpha-invoice"></div>

### Invalid α Invoice or Win Invoice Rejected

- **Wrong subnet**: Pay from the subnet specified in the invoice (usually subnet 62).
- **Clock drift**: Align the system clock so invoices fall within the validator window.
  ```bash
  sudo apt install chrony -y
  sudo systemctl enable chrony --now
  ```
- **Desynced miner**: Restart with a fresh metagraph pull.
  ```bash
  python neurons/miner.py --fresh
  ```

<div id="alpha-payments"></div>

## α Payments & Funding

<Info>
α balances are debited automatically when your bid wins. Check balances on the funding subnet before auctions start.
</Info>

```bash
btcli stake overview --wallet.name mywallet --wallet.hotkey miner1
```

- Low α = bids will fail; top up via `tao_to_alpha`.
- Missing α columns = wrong network. Confirm `.env` includes `BITTENSOR_NETWORK=finney`.
- Payments that fail still burn α, so keep a buffer on funding subnet 62.

<div id="alpha-conversion-commands"></div>

### α Conversion Commands

```bash
btcli subnets alpha_to_tao --netuid 62 --wallet.name mywallet --wallet.hotkey miner1 --amount 1.0
btcli subnets tao_to_alpha --netuid 62 --wallet.name mywallet --wallet.hotkey miner1 --amount 1.0
```

If you see `No such command 'swap'`, you are on an outdated command. The above replaces the legacy `swap` syntax.

## Network & Resource Stability

<div id="miner-killed-oom"></div>

### Miner Killed (OOM)

Add swap to prevent Linux from terminating the process:

```bash
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

For long-term stability, upgrade to a t3.medium (or higher) and monitor with `htop`.

<div id="clock-drift"></div>

### Clock Drift / Block Mismatch

Symptoms include `Extrinsic not included` or invoices expiring immediately.

```bash
sudo apt install chrony -y
sudo systemctl enable chrony --now
```

Restart the miner if logs still trail the chain by >50 blocks.

<div id="network-desync"></div>

### Network Desync

When your local metagraph lags:

```bash
python neurons/miner.py --fresh
```

or, if running via systemd:

```bash
sudo systemctl restart metahash-miner
```

## Setup & Configuration

### Command `python` Not Found

Use `python3` for all commands or create a shell alias:

```bash
echo 'alias python=python3' >> ~/.bashrc
source ~/.bashrc
```

### async-substrate-interface Mismatch

MetaHash expects `async-substrate-interface==1.3.1`:

```bash
pip install --upgrade async-substrate-interface==1.3.1
```

### Missing `.env` Template

Manual `.env` (place in repo root):

```bash
WALLET_NAME=mywallet
WALLET_HOTKEY=miner1
WALLET_PASSWORD=supersecret
BITTENSOR_NETWORK=finney
```

<div id="bids-length-mismatch"></div>

### ValueError: miner.bids.* Lengths Must Match

Ensure every bid flag has the same number of values:

```bash
--miner.bids.netuids 62 63
--miner.bids.amounts 0.25 0.20
--miner.bids.discounts 500 450
```

## Wallet & Credentials

### Insufficient Balance

Top up at least `0.001 TAO` to register and stake. Transfers arrive faster if both sides are on Finney.

### Missed Seed Words

1. Run `btcli wallet list` to confirm wallets exist.
2. Back up `~/.bittensor/wallets/`.
3. For new wallets, copy the mnemonic to an offline vault before proceeding.

<div id="wallet-password-loop"></div>

### Wallet Password Prompt Loops

1. Confirm `.env` is alongside the repo (e.g., `~/metahash/.env`).
2. Include `WALLET_PASSWORD=yourpassword`.
3. Launch the miner from the same directory so the env file loads automatically.

<div id="health-checklist"></div>

## Diagnostics & Health Checks

| Check | Command | Expected |
|-------|---------|----------|
| Port 8091 listening | `ss -tulpn \| grep 8091` | Miner shows `python` on `[::]:8091` |
| Validator stake | `btcli stake overview` | Payment hotkey has >0 TAO |
| Log activity | `tail -n 50 ~/.bittensor/miners/&lt;wallet&gt;/&lt;hotkey&gt;/netuid73/miner.log` | Look for `AuctionStart` + `WinSynapse` |
| Memory headroom | `free -h` | Swap available, RAM usage <90% |
| Disk space | `df -h` | >10% free on `/` and `/home` |

### Additional Commands

- Check UID: `btcli subnets metagraph --netuid 73 | grep YOUR_HOTKEY`
- List validators: `btcli subnets metagraph --netuid 73 | grep validator`
- Follow logs live: `tail -f ~/.bittensor/miners/&lt;wallet&gt;/&lt;hotkey&gt;/netuid73/miner.log`

## Getting Help

If an issue persists:

1. Collect logs (`tail -n 200 .../miner.log`).
2. Open a ticket in [Discord](https://discord.com/channels/799672011265015819/1351969903132938302).
3. File a report on [GitHub](https://github.com/fx-integral/metahash/issues) if you suspect a bug.

<Tip>
When asking for help, include your UID, system specs, problem timeline, and key log excerpts. It shortens the back-and-forth dramatically.
</Tip>
