---
title: Helpful Commands
description: Quick reference for common MetaHash and Bittensor commands
---

# Helpful Commands

Quick reference guide for common operations and commands.

## Wallet Management

<CodeGroup>
```bash List Wallets
btcli wallet list
```

```bash Wallet Overview
btcli wallet overview --wallet.name mywallet
```

```bash Check Balance
btcli wallet balance --wallet.name mywallet
```

```bash List Hotkeys
btcli wallet list --wallet.name mywallet
```

```bash Export Wallet
# Backup wallet files
cp -r ~/.bittensor/wallets/mywallet ~/wallet-backup/
```
</CodeGroup>

---

## Stake Management

<CodeGroup>
```bash Stake Overview
btcli stake overview --wallet.name mywallet --wallet.hotkey miner1
```

```bash Add Stake
btcli stake add --netuid 62 --wallet.name mywallet --wallet.hotkey miner1 --amount 0.15
```

```bash Remove Stake
btcli stake remove --netuid 62 --wallet.name mywallet --wallet.hotkey miner1 --amount 0.10
```

```bash Check Stake on Specific Subnet
btcli stake show --netuid 62 --wallet.name mywallet --wallet.hotkey miner1
```
</CodeGroup>

---

## α (Alpha) Operations

<CodeGroup>
```bash Convert α to TAO
btcli subnets alpha_to_tao --netuid 62 --wallet.name mywallet --wallet.hotkey miner1 --amount X
```

```bash Convert TAO to α
btcli subnets tao_to_alpha --netuid 62 --wallet.name mywallet --wallet.hotkey miner1 --amount X
```

```bash Check α Balance
btcli stake overview --wallet.name mywallet --wallet.hotkey miner1
# Shows α balance per subnet
```
</CodeGroup>

<Warning>
Always ensure your `.env` includes `BITTENSOR_NETWORK=finney` before running swap commands.
</Warning>

---

## Subnet Operations

<CodeGroup>
```bash View Metagraph
btcli subnets metagraph --netuid 73
```

```bash Find Your Miner UID
btcli subnets metagraph --netuid 73 | grep YOUR_HOTKEY_ADDRESS
```

```bash List All Validators
btcli subnets metagraph --netuid 73 | grep validator
```

```bash Subnet Info
btcli subnets info --netuid 73
```
</CodeGroup>

---

## Miner Management

<CodeGroup>
```bash Start Miner
python neurons/miner.py \
  --netuid 73 \
  --wallet.name mywallet \
  --wallet.hotkey miner1 \
  --subtensor.network finney \
  --miner.bids.netuids 62 \
  --miner.bids.amounts 0.25 \
  --miner.bids.discounts 500 \
  --axon.port 8091 \
  --axon.external_port 8091 \
  --logging.debug \
  --blacklist.force_validator_permit \
  --payment.validators YOUR_HOTKEY
```

```bash Start with Fresh Sync
python neurons/miner.py --fresh
# Resyncs metagraph from scratch
```

```bash View Miner Logs
tail -f ~/.bittensor/miners/mywallet/miner1/netuid73/miner.log
```

```bash Check Miner Process
ps aux | grep miner
```

```bash Kill Miner Process
pkill -f "neurons/miner.py"
```
</CodeGroup>

---

## System & Network Diagnostics

<CodeGroup>
```bash Check Port Status
ss -tulpn | grep 8091
```

```bash Test External Port Access
nc -zv YOUR_INSTANCE_IP 8091
```

```bash Check Memory Usage
free -h
```

```bash Check Disk Space
df -h
```

```bash Monitor System Resources
htop
```

```bash Check Network Connectivity
ping -c 5 8.8.8.8
```

```bash Verify Clock Sync
timedatectl status
```
</CodeGroup>

---

## Systemd Service Commands

<CodeGroup>
```bash Start Service
sudo systemctl start metahash-miner
```

```bash Stop Service
sudo systemctl stop metahash-miner
```

```bash Restart Service
sudo systemctl restart metahash-miner
```

```bash Service Status
sudo systemctl status metahash-miner
```

```bash View Service Logs
journalctl -u metahash-miner -f
```

```bash View Last 100 Log Lines
journalctl -u metahash-miner -n 100
```

```bash Enable Auto-Start
sudo systemctl enable metahash-miner
```

```bash Disable Auto-Start
sudo systemctl disable metahash-miner
```

```bash Reload Service Configuration
sudo systemctl daemon-reload
```
</CodeGroup>

---

## Screen Session Commands

<CodeGroup>
```bash Create New Session
screen -S miner
```

```bash Detach from Session
# Press: Ctrl+A then D
```

```bash List Sessions
screen -ls
```

```bash Reattach to Session
screen -r miner
```

```bash Kill Session
screen -X -S miner quit
```

```bash Reattach to Detached Session
screen -d -r miner
```
</CodeGroup>

---

## Maintenance Commands

<CodeGroup>
```bash Update System
sudo apt update && sudo apt upgrade -y
```

```bash Update MetaHash Repository
cd ~/metahash
git pull origin main
```

```bash Reinstall Dependencies
source .venv/bin/activate
pip install -U pip wheel uv
uv pip install -e .
```

```bash Update Bittensor CLI
pip install -U bittensor-cli
```

```bash Clean Python Cache
find . -type d -name __pycache__ -exec rm -rf {} +
find . -type f -name "*.pyc" -delete
```

```bash Check Virtual Environment
which python
# Should show: /home/ubuntu/metahash/.venv/bin/python
```
</CodeGroup>

---

## Swap Space Management

<CodeGroup>
```bash Create Swap File
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

```bash Make Swap Permanent
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

```bash Check Swap Status
swapon --show
free -h
```

```bash Remove Swap
sudo swapoff /swapfile
sudo rm /swapfile
# Remove from /etc/fstab
```
</CodeGroup>

---

## Firewall (UFW) Commands

<CodeGroup>
```bash Check UFW Status
sudo ufw status
```

```bash Allow Port 8091
sudo ufw allow 8091/tcp
```

```bash Enable UFW
sudo ufw enable
```

```bash Disable UFW
sudo ufw disable
```

```bash List UFW Rules
sudo ufw status numbered
```

```bash Delete UFW Rule
sudo ufw delete NUMBER
```
</CodeGroup>

---

## Log Analysis

<CodeGroup>
```bash Search Logs for Errors
grep -i "error" ~/.bittensor/miners/mywallet/miner1/netuid73/miner.log
```

```bash Search for AuctionStart
grep "AuctionStart" ~/.bittensor/miners/mywallet/miner1/netuid73/miner.log
```

```bash Search for Wins
grep "Win invoice" ~/.bittensor/miners/mywallet/miner1/netuid73/miner.log
```

```bash Count Log Entries
wc -l ~/.bittensor/miners/mywallet/miner1/netuid73/miner.log
```

```bash View Last Hour of Logs
journalctl -u metahash-miner --since "1 hour ago"
```
</CodeGroup>

---

## Quick Diagnostics Script

Create a comprehensive health check script:

```bash health-check.sh
#!/bin/bash

echo "=== MetaHash Miner Health Check ==="
echo ""

echo "1. Service Status:"
sudo systemctl status metahash-miner --no-pager | head -5
echo ""

echo "2. Port 8091 Status:"
ss -tulpn | grep 8091
echo ""

echo "3. Memory Usage:"
free -h
echo ""

echo "4. Disk Space:"
df -h | grep -E "Filesystem|/$"
echo ""

echo "5. Miner Process:"
ps aux | grep "[m]iner.py"
echo ""

echo "6. Recent Auction Activity:"
grep "AuctionStart\|Win invoice" ~/.bittensor/miners/mywallet/miner1/netuid73/miner.log | tail -5
echo ""

echo "7. Wallet Balance:"
btcli wallet balance --wallet.name mywallet
echo ""

echo "=== End Health Check ==="
```

Make it executable:
```bash
chmod +x health-check.sh
./health-check.sh
```

---

## Quick Troubleshooting

<AccordionGroup>
  <Accordion title="Miner not responding">
    ```bash
    # Restart the service
    sudo systemctl restart metahash-miner

    # Check logs
    journalctl -u metahash-miner -n 50
    ```
  </Accordion>

  <Accordion title="Out of memory">
    ```bash
    # Check memory
    free -h

    # Add swap if needed
    sudo fallocate -l 2G /swapfile
    sudo chmod 600 /swapfile
    sudo mkswap /swapfile
    sudo swapon /swapfile
    ```
  </Accordion>

  <Accordion title="Network desync">
    ```bash
    # Resync from fresh
    python neurons/miner.py --fresh
    ```
  </Accordion>

  <Accordion title="Port issues">
    ```bash
    # Check port
    ss -tulpn | grep 8091

    # Check security group in AWS
    # Open port 8091 TCP inbound
    ```
  </Accordion>
</AccordionGroup>

---

## Next Steps

Review the [Final Checklist](/troubleshoot/checklist) to ensure your miner is fully configured and operational.
